{"createdAt":"2025-10-22T09:02:10.615Z","updatedAt":"2025-10-22T11:45:00.528Z","id":"tyqA1n6jzTg0BXYs","name":"preparartion","active":false,"isArchived":false,"nodes":[{"parameters":{"content":"## Run Each Node Once to Set Up Database Tables","height":300,"width":1144,"color":3},"type":"n8n-nodes-base.stickyNote","position":[0,0],"typeVersion":1,"id":"7ba48ff7-60dc-41aa-912b-d325a5aa319b","name":"Sticky Note3"},{"parameters":{"operation":"executeQuery","query":"CREATE TABLE document_metadata (\n    id TEXT PRIMARY KEY,\n    title TEXT,\n    created_at TIMESTAMP DEFAULT NOW(),\n    schema TEXT\n);","options":{}},"type":"n8n-nodes-base.postgres","typeVersion":2.5,"position":[32,112],"id":"ffe3ccd7-6950-41af-a586-d8fd6b11f31e","name":"Create Document Metadata Table","credentials":{"postgres":{"id":"1UYGGMrKqBKIC1KM","name":"Postgres account"}}},{"parameters":{"operation":"executeQuery","query":"CREATE TABLE document_rows (\n    id SERIAL PRIMARY KEY,\n    dataset_id TEXT REFERENCES document_metadata(id),\n    row_data JSONB  -- Store the actual row data\n);","options":{}},"type":"n8n-nodes-base.postgres","typeVersion":2.5,"position":[256,112],"id":"5e05144c-77b4-407f-a328-4fccf09e63b2","name":"Create Document Rows Table (for Tabular Data)","credentials":{"postgres":{"id":"1UYGGMrKqBKIC1KM","name":"Postgres account"}}},{"parameters":{"operation":"executeQuery","query":"CREATE EXTENSION vector;","options":{}},"type":"n8n-nodes-base.postgres","typeVersion":2.5,"position":[512,112],"id":"b61890d8-10ce-4f84-9a58-ac9ffe96ef2e","name":"activate vector extension","credentials":{"postgres":{"id":"1UYGGMrKqBKIC1KM","name":"Postgres account"}}},{"parameters":{"operation":"executeQuery","query":"CREATE INDEX IF NOT EXISTS image_embeddings_hnsw\nON image_embeddings\nUSING hnsw (embedding vector_cosine_ops);","options":{}},"type":"n8n-nodes-base.postgres","typeVersion":2.5,"position":[736,112],"id":"7ac63e5a-3db5-40a9-b36b-f282d0f09dba","name":"index embeddings","credentials":{"postgres":{"id":"1UYGGMrKqBKIC1KM","name":"Postgres account"}}},{"parameters":{"operation":"executeQuery","query":"VACUUM ANALYZE image_embeddings;","options":{}},"type":"n8n-nodes-base.postgres","typeVersion":2.5,"position":[944,112],"id":"c08aa328-313c-4851-b24d-c0850b401f01","name":"vacuum embeddings","credentials":{"postgres":{"id":"1UYGGMrKqBKIC1KM","name":"Postgres account"}}}],"connections":{"Create Document Metadata Table":{"main":[[{"node":"Create Document Rows Table (for Tabular Data)","type":"main","index":0}]]},"Create Document Rows Table (for Tabular Data)":{"main":[[{"node":"activate vector extension","type":"main","index":0}]]},"activate vector extension":{"main":[[{"node":"index embeddings","type":"main","index":0}]]},"index embeddings":{"main":[[{"node":"vacuum embeddings","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true,"instanceId":"45bb40c081e4b6f8f58a5ac67dbbde0b2f72076c359dec53a967f37020ce14bd"},"pinData":{},"versionId":"e17d7844-bf95-468b-af5a-47e468fa60a1","triggerCount":0,"tags":[],"shared":[{"createdAt":"2025-10-22T09:02:10.615Z","updatedAt":"2025-10-22T09:02:10.615Z","role":"workflow:owner","workflowId":"tyqA1n6jzTg0BXYs","projectId":"Boc8C2zZqrFORyB9","project":{"createdAt":"2025-10-22T09:02:06.036Z","updatedAt":"2025-10-22T09:24:58.578Z","id":"Boc8C2zZqrFORyB9","name":"admin admin <admin@admin.com>","type":"personal","icon":null,"description":null}}]}